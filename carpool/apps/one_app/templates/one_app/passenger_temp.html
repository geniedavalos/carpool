<!DOCTYPE html>
<html>
<head>
  <style>
    html, body, #map-canvas {
      height: 400px;
      margin: 0px;
      padding: 0px
    }
    #markers_info .marker {
      height: 40px;
      cursor: pointer;
    }
  </style>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=AIzaSyBHat7GUB_7DzbenFgIYvgxlyjvbnG19-o&language=de"></script>
  <script>
  /**
    jQuery events
  */
  $(document).ready(function() {
    // initiate Google maps
    initialize();
    // make a .hover event
    $('#markers_info .marker').hover(
      // mouse in
      function () {
        // first we need to know which <div class="marker"></div> we hovered
        var index = $('#markers_info .marker').index(this);
        markers[index].setIcon(highlightedIcon());
      },
      // mouse out
      function () {
        // first we need to know which <div class="marker"></div> we hovered
        var index = $('#markers_info .marker').index(this);
        markers[index].setIcon(normalIcon());
      }

    );
  });
  /**
    Google Maps stuff
  */
    var markerData = [   // the order of these markers must be the same as the <div class="marker"></div> elements
      {% for location in locations %}
      {lat: {{ location.lat }}, lng: {{ location.lng }}, title: '{{ location.place }}'},
      {% endfor %}

    ];
    var map;
    var markers = [];
    var mapOptions = {
      zoom: 12,
      center: new google.maps.LatLng({{ lat }},{{ lng }}),  // Brussels, Belgium
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
      new google.maps.Marker({
            position: new google.maps.LatLng({{ lat }}, {{ lng }}),
            title: 'my home',
            map: map,
            icon: normal()
          })

      for (var i=0; i<markerData.length; i++) {
        markers.push(
          new google.maps.Marker({
            position: new google.maps.LatLng(markerData[i].lat, markerData[i].lng),
            title: markerData[i].title,
            map: map,
            icon: normalIcon()
          })
        );
      }
    }


    // functions that return icons.  Make or find your own markers.
    function normalIcon() {
      return {
        url: '    http://labs.google.com/ridefinder/images/mm_20_red.png'
      };
    }
    function highlightedIcon() {
      return {
        url: 'http://1.bp.blogspot.com/_GZzKwf6g1o8/S6xwK6CSghI/AAAAAAAAA98/_iA3r4Ehclk/s1600/marker-green.png'
      };
    }
    function normal() {
      return {
        url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
      };
    }
    //google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>
<body>
  <div id="map-canvas"></div>
  <div id="markers_info">
      {% for location in locations %}
         <a href="/passenger/add_ride/{{ location.id }}"> <div class="marker">{{ location.place }} {{ location.id }}</div></a>
      {% endfor %}
  </div>

</body>
</html>
